import{o as e,P as t,a8 as o,J as n,aR as s,b as a,c as u,H as l,ai as d,I as c,bP as i,ag as r,cg as m,ah as v,bg as f,t as p,z as y,d as h,l as b,ch as g,k as M,al as x}from"./index.D_6c1BO-.js";import{t as E}from"./event.CIKxL71l.js";import{g as k}from"./index.C9igdc6f.js";const w=(s,a,u,l)=>{let d={offsetX:0,offsetY:0};const c=e=>{const t=e.clientX,o=e.clientY,{offsetX:a,offsetY:u}=d,c=s.value.getBoundingClientRect(),i=c.left,r=c.top,m=c.width,v=c.height,f=document.documentElement.clientWidth,p=document.documentElement.clientHeight,y=-i+a,h=-r+u,b=f-i-m+a,g=p-r-v+u,M=e=>{let c=a+e.clientX-t,i=u+e.clientY-o;(null==l?void 0:l.value)||(c=Math.min(Math.max(c,y),b),i=Math.min(Math.max(i,h),g)),d={offsetX:c,offsetY:i},s.value&&(s.value.style.transform=`translate(${n(c)}, ${n(i)})`)},x=()=>{document.removeEventListener("mousemove",M),document.removeEventListener("mouseup",x)};document.addEventListener("mousemove",M),document.addEventListener("mouseup",x)},i=()=>{a.value&&s.value&&a.value.removeEventListener("mousedown",c)};return e((()=>{t((()=>{u.value?a.value&&s.value&&a.value.addEventListener("mousedown",c):i()}))})),o((()=>{i()})),{resetPostion:()=>{d={offsetX:0,offsetY:0},s.value&&(s.value.style.transform="none")}}},C=(e,t={})=>{s(e)||E("[useLockscreen]","You need to pass a ref param to this function");const o=t.ns||a("popup"),n=u((()=>o.bm("parent","hidden")));if(!l||d(document.body,n.value))return;let f=0,p=!1,y="0";const h=()=>{setTimeout((()=>{v(null==document?void 0:document.body,n.value),p&&document&&(document.body.style.width=y)}),200)};c(e,(e=>{if(!e)return void h();p=!d(document.body,n.value),p&&(y=document.body.style.width),f=k(o.namespace.value);const t=document.documentElement.clientHeight<document.body.scrollHeight,s=i(document.body,"overflowY");f>0&&(t||"scroll"===s)&&p&&(document.body.style.width=`calc(100% - ${f}px)`),r(document.body,n.value)})),m((()=>h()))},L=e=>{if(!e)return{onClick:f,onMousedown:f,onMouseup:f};let t=!1,o=!1;return{onClick:n=>{t&&o&&e(n),t=o=!1},onMousedown:e=>{t=e.target===e.currentTarget},onMouseup:e=>{o=e.target===e.currentTarget}}},Y=p({mask:{type:Boolean,default:!0},customMaskEvent:Boolean,overlayClass:{type:y([String,Array,Object])},zIndex:{type:y([String,Number])}});const z=h({name:"ElOverlay",props:Y,emits:{click:e=>e instanceof MouseEvent},setup(e,{slots:t,emit:o}){const n=a("overlay"),{onClick:s,onMousedown:u,onMouseup:l}=L(e.customMaskEvent?void 0:e=>{o("click",e)});return()=>e.mask?b("div",{class:[n.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:s,onMousedown:u,onMouseup:l},[M(t,"default")],g.STYLE|g.CLASS|g.PROPS,["onClick","onMouseup","onMousedown"]):x("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[M(t,"default")])}});export{z as E,C as a,L as b,w as u};
