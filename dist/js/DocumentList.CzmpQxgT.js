import{d as e,aG as a,r as t,o as l,e as r,h as s,f as n,w as o,l as u,a1 as i,D as c,p as d,Q as p,R as m,B as v,aZ as f,aw as g}from"./index.D_6c1BO-.js";import{E as h}from"./el-pagination.iB7W_mBW.js";/* empty css               */import"./el-select.txC_RwMJ.js";import{E as y}from"./el-popper.B126Dx6T.js";import{E as _}from"./el-skeleton-item.P-4Smcyt.js";import{E as j,a as x}from"./el-timeline-item.Dt-ABmuw.js";import"./el-tooltip.l0sNRNKZ.js";import{h as k}from"./moment.Ceu9ScYO.js";import{g as w,P as z}from"./wordpress.eOt7bANc.js";import{E as D}from"./index.DAlCTFiK.js";const H=["onClick"],I=["src"],L={class:"document-list-text"},M=["innerHTML"],b=["innerHTML"],E=g(e({__name:"DocumentList",props:{categoryId:{},documentPath:{default:"/home/document"}},setup(e){k.locale("zh-cn");const g=a(),E=e,C=t(!1),P=t(null),T=t(null),Y=t({current:1,count:null,size:10,total:null}),q=async()=>{try{const e=await w(E.categoryId);P.value=e.data;const a=await z(E.categoryId,Y.value.size,Y.value.current);T.value=a.data,Y.value={current:Y.value.current,count:parseInt(a.headers["x-wp-totalpages"]),size:Y.value.size,total:parseInt(a.headers["x-wp-total"])}}catch(e){}};l((()=>{q()}));const B=e=>{Y.value.current=e,q()};return(e,a)=>{const t=D,l=y,w=f,z=j,q=x,G=_,Q=h;return r(),s("div",null,[P.value?(r(),n(l,{key:0,content:P.value.description,placement:"top",effect:"light"},{default:o((()=>[u(t,{size:"small",style:{"margin-left":"68px","margin-bottom":"15px"}},{default:o((()=>[i(c(P.value.name),1)])),_:1})])),_:1},8,["content"])):d("",!0),T.value?(r(),n(q,{key:1,reverse:C.value},{default:o((()=>[(r(!0),s(p,null,m(T.value,((e,a)=>{return r(),n(z,{key:a,timestamp:(t=new Date(e.date),k(t).format("YYYY-MM-DD HH:mm:ss"))},{default:o((()=>[u(w,{"body-style":{padding:"0px"},shadow:"hover",class:"document-box-card"},{default:o((()=>[v("div",{style:{padding:"-10px"},onClick:a=>{return t=e.id,void g.push({path:E.documentPath,query:{id:t}});var t}},[v("img",{align:"left",class:"document-list-img",src:e.jetpack_featured_media_url,fit:"cover"},null,8,I),v("div",L,[v("h3",{innerHTML:e.title.rendered},null,8,M),v("div",{innerHTML:e.excerpt.rendered},null,8,b)])],8,H)])),_:2},1024)])),_:2},1032,["timestamp"]);var t})),128))])),_:1},8,["reverse"])):(r(),n(q,{key:2},{default:o((()=>[u(z,null,{default:o((()=>[u(G,{rows:3})])),_:1}),u(z,null,{default:o((()=>[u(G,{rows:3})])),_:1})])),_:1})),Y.value.count>1?(r(),n(Q,{key:3,"current-page":Y.value.current,"page-count":Y.value.count??0,"page-size":Y.value.size,total:Y.value.total??0,layout:"prev, pager, next, jumper",background:"",onCurrentChange:B},null,8,["current-page","page-count","page-size","total"])):d("",!0)])}}}),[["__scopeId","data-v-11af02a9"]]);export{E as D};
