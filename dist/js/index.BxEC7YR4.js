import{d as a,r as t,X as e,o as s,ab as r,e as n,h as i,l as o,w as l,B as u,bq as c,g as p,f as d,a1 as m,p as f,aA as g,a0 as j,b8 as x,br as y,aZ as _,bs as h,bt as w}from"./index.D_6c1BO-.js";import{E as b}from"./el-pagination.iB7W_mBW.js";/* empty css               */import"./el-select.txC_RwMJ.js";import"./el-popper.B126Dx6T.js";/* empty css                        */import{x as v,y as z,z as k}from"./index.Du8HYfpv.js";import{M as B}from"./index.2-ALQ3uU.js";import{M,W as T}from"./index.CRad9h5U.js";/* empty css                       *//* empty css                 *//* empty css                   */import{E as C}from"./index.sgqfUYPi.js";import"./isEqual._mAmV373.js";import"./_Uint8Array.DVftYLkF.js";import"./index.D3735v7o.js";import"./event.CIKxL71l.js";import"./index.DAlCTFiK.js";import"./strings.BAs9FsGt.js";import"./castArray.Dh6ReS0w.js";import"./index.C9igdc6f.js";import"./v4.aGgpFg1T.js";import"./index.BtcHjPUK.js";import"./aria.D6AGjDMk.js";const I={class:"project-index"},A=u("br",null,null,-1),E=u("span",{class:"hidden-sm-and-down"},"上传音频",-1),O=u("br",null,null,-1),S=a({__name:"index",setup(a){const u=t([]),S=t("-created_at"),q=t(""),U=e({current:1,count:1,size:20,total:20}),W=async a=>{U.current=a,await Q()},Z=async a=>{try{const{value:t}=await C.prompt("请输入新名称","修改音频名称",{confirmButtonText:"确定",cancelButtonText:"取消",closeOnClickModal:!1,inputValue:a.name});await K(a.id,t),g.success("新的音频名称: "+t)}catch{g.info("取消输入")}},D=a=>{S.value=a,Q()},F=a=>{q.value=a,Q()},K=async(a,t)=>{try{await z(a,{name:t}),Q()}catch(e){}},L=async a=>{try{await C.confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",closeOnClickModal:!1,type:"warning"}),await N(a.id),g.success("删除成功!")}catch{g.info("已取消删除")}},N=async a=>{try{await k(a),Q()}catch(t){}},Q=async()=>{try{const a=await v(S.value,q.value,U.current);U.current=parseInt(a.headers["x-pagination-current-page"]),U.count=parseInt(a.headers["x-pagination-page-count"]),U.size=parseInt(a.headers["x-pagination-per-page"]),U.total=parseInt(a.headers["x-pagination-total-count"]),a.data&&(u.value=a.data)}catch(a){}};return s((()=>Q())),(a,t)=>{const e=j,s=r("router-link"),g=x,v=y,z=_,k=h,C=b,K=w,N=c;return n(),i("div",I,[A,o(N,null,{default:l((()=>[o(v,null,{default:l((()=>[o(M,{sorted:p(S),searched:p(q),onSearch:F,onSort:D},{default:l((()=>[o(g,{inline:!0},{default:l((()=>[o(s,{to:"/resource/audio/upload"},{default:l((()=>[o(e,{size:"small",type:"primary",icon:"uploadFilled"},{default:l((()=>[E])),_:1})])),_:1})])),_:1})])),_:1},8,["sorted","searched"])])),_:1}),o(k,null,{default:l((()=>[o(z,null,{default:l((()=>[o(p(T),{list:p(u),width:320,gutter:10},{item:l((({item:a})=>[o(B,{item:a,onNamed:Z,onDeleted:L},{enter:l((()=>[o(s,{to:`/resource/audio/view?id=${a.id}`},{default:l((()=>[null===a.info||null===a.image?(n(),d(e,{key:0,type:"warning",size:"small"},{default:l((()=>[m(" 初始化音频数据 ")])),_:1})):f("",!0),o(e,{type:"primary",size:"small"},{default:l((()=>[m("查看音频")])),_:1})])),_:2},1032,["to"])])),_:2},1032,["item"])])),_:1},8,["list"])])),_:1})])),_:1}),o(K,null,{default:l((()=>[o(z,{class:"box-card"},{default:l((()=>[o(C,{"current-page":p(U).current,"page-count":p(U).count,"page-size":p(U).size,total:p(U).total,layout:"prev, pager, next, jumper",background:"",onCurrentChange:W},null,8,["current-page","page-count","page-size","total"])])),_:1})])),_:1})])),_:1}),O])}}});export{S as default};
