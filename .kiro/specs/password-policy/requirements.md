# 密码策略前端适配 - 需求文档

## 概述

后端已升级注册和密码重置的密码策略。前端需要适配新策略，包括更新验证规则、添加密码强度指示器、统一密码验证逻辑，并更新国际化文案。

参考文档: #[[file:docs/PASSWORD_POLICY.md]]

## 用户故事

### 1. 共享密码验证工具

作为开发者，我需要一个统一的密码验证工具函数，以消除当前在多个组件中重复的密码验证逻辑。

#### 验收标准

- 1.1 创建 `src/utils/password-validator.ts` 工具模块，导出密码验证函数
- 1.2 验证函数接受密码字符串，返回包含每条规则通过/失败状态的结构化结果
- 1.3 验证规则包括：最小长度 12 字符、最大长度 128 字符、包含大写字母、包含小写字母、包含数字、包含特殊字符
- 1.4 提供一个便捷函数判断密码是否整体通过所有规则
- 1.5 提供一个函数返回密码强度等级（弱/中/强）

### 2. 密码强度指示器组件

作为用户，我希望在输入密码时看到实时的密码强度反馈，以便知道我的密码是否满足要求。

#### 验收标准

- 2.1 创建 `src/components/PasswordStrength/index.vue` 组件
- 2.2 组件实时显示每条密码规则的通过/失败状态（带图标）
- 2.3 组件显示整体密码强度等级（弱/中/强），使用颜色区分
- 2.4 组件接受 `password` prop，响应式更新
- 2.5 组件支持暗色主题（dark mode）

### 3. 注册页面适配

作为新用户，我在注册时需要满足新的密码策略，并能看到清晰的密码要求提示。

#### 验收标准

- 3.1 `src/views/site/register/index.vue` 使用共享密码验证工具替换硬编码规则
- 3.2 `src/components/Account/RegisterForm.vue` 使用共享密码验证工具替换硬编码规则
- 3.3 两个注册表单的密码输入框下方集成密码强度指示器组件
- 3.4 密码最小长度验证更新为 12 字符
- 3.5 密码最大长度验证更新为 128 字符
- 3.6 密码正则验证更新为要求特殊字符
- 3.7 后端返回的密码错误数组能正确展示给用户

### 4. 密码重置页面适配

作为已有用户，我在重置密码时需要满足新的密码策略。

#### 验收标准

- 4.1 `src/views/settings/account.vue` 的新密码字段使用共享密码验证工具
- 4.2 新密码输入框下方集成密码强度指示器组件
- 4.3 新密码最小长度验证更新为 12 字符
- 4.4 旧密码验证规则保持不变（老用户不受影响）

### 5. 国际化文案更新

作为多语言用户，我希望看到准确的密码要求提示信息。

#### 验收标准

- 5.1 更新 `src/lang/zh-CN/` 中密码相关文案，反映新的 12 字符最小长度和特殊字符要求
- 5.2 更新 `src/lang/en-US/` 中密码相关文案
- 5.3 更新 `src/lang/zh-TW/` 中密码相关文案
- 5.4 更新 `src/lang/th-TH/` 中密码相关文案
- 5.5 更新 `src/lang/ja-JP/` 中密码相关文案
- 5.6 添加密码强度指示器组件所需的新国际化 key

## 不在范围内

- 登录页面不需要任何改动
- 后端 API 不需要改动（后端已完成升级）
- 弱密码字典检查由后端负责，前端仅展示后端返回的错误信息
